@*@using PS_TUP.Models.Reportes
    @model DenunciasPorAnio*@

@model IEnumerable<PS_TUP.Models.Reportes.DenunciasPorAnio>


@{
    ViewBag.Title = "ResultadosBusquedaEstadistica";
}

<h2>ResultadosBusquedaEstadistica</h2>

<div class="container-fluid">
    <div class="row">
        <div class="col-md-12 ">
    
            <hr />
            <h2 class="text-center">Total de Denuncias por Mes del Año en Curso</h2>
            <canvas id="myChart" width="400" height="150"></canvas>
     
        </div>

        <hr />

        @*<h3 class="">Evolución anual de las denuncias por Tipo/Motivo </h3>

        @using (Html.BeginForm("ResultadosBusquedaEstadistica", "Fiscalia", FormMethod.Get))
        {

            <form class="text-center" id="buscar" name="buscar" role="search">
                @Html.DropDownList("IdTipoDenuncia", items, "Motivo de la Denuncia", htmlAttributes: new { @class = "dropDown", id = "combo", required = "required" })
                @Html.ValidationMessageFor(model => model.IdTipoDenuncia, "", new { @class = "text-danger" })

                <input type="submit" id="buscar" class="btn-close-white" value="Buscar">
            </form>

        }*@



    </div>
</div>




@section scripts
 {

    <script src="../assets/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js" integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js" integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.5.0/chart.js" integrity="sha512-XcsV/45eM/syxTudkE8AoKK1OfxTrlFpOltc9NmHXh3HF+0ZA917G9iG6Fm7B6AzP+UeEzV8pLwnbRNPxdUpfA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


    <script>
     (function () {
         'use strict'

         feather.replace({ 'aria-hidden': 'true' })

         // Graphs
         var ctx = document.getElementById('myChart')
         var myChart = new Chart(ctx, {
             type: 'line',
             data:
         {
         labels: [
                    @{
                     foreach (var item in Model)
                     {

                         string number = item.anio.ToString();
                         int[] digits = number.Select(c => Convert.ToInt32(c.ToString())).ToArray();

                         foreach (var nro in digits)
                         {

                                     @($"{nro},")
                         }
                     }
                 }


         ],
                 datasets: [{
                 label: 'Total de denuncias',
                     data: [

                         @{
                     foreach (var item in Model)
                     {

                         string number = item.cantidad.ToString();
                         int[] digits = number.Select(c => Convert.ToInt32(c.ToString())).ToArray();

                         foreach (var nro in digits)
                         {

                                     @($"{nro},")
                         }
                     }
                 }

                     ],
                     lineTension: 0,
                     backgroundColor: 'transparent',
                     borderColor: '#007bff',
                     borderWidth: 4,
                     pointBackgroundColor: '#007bff'
                 }]
             },
             options:
         {
         scales:
             {
             yAxes: [{
                 ticks:
                     {
                     beginAtZero: false
                         }
                 }]
                 },
                 legend:
             {
             display: false
                 }
         }
     })
     })()

    </script>
    }




    <table class="table table-striped table-hover">
        <tbody>
            <tr>

                <th>
                    <label>cantidad</label>
                </th>
                <th>
                    <label>año</label>
                </th>
                <th class=""></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>

                    <td class="align-middle ">
                        @Html.DisplayFor(modelItem => item.cantidad)
                    </td>
                    <td class="align-middle ">
                        @Html.DisplayFor(modelItem => item.anio)
                    </td>
                    <td class="align-middle"></td>
                </tr>
            }
        </tbody>
    </table>



    @*@Html.EditorFor(model => model.cantidad, new { htmlAttributes = new { @class = "", @id = "Ciudad", @placeholder = "Ciudad", @name = "Ciudad", @maxlength = "45" } })*@
